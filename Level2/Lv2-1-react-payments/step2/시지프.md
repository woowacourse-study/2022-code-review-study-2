# Level2 íŽ˜ì´ë¨¼ì¸  Step1 - ì‹œì§€í”„

ë¶„ì„ ë‹´ë‹¹ ì½”ë“œ

- [#131, ë§ˆë¥´ì½”](https://github.com/woowacourse/react-payments/pull/131)
- [#118, ì¤€ì°Œ](https://github.com/woowacourse/react-payments/pull/118)
- [#133, ìš°ë””](https://github.com/woowacourse/react-payments/pull/133)
- [#114, ë‚˜ì¸](https://github.com/woowacourse/react-payments/pull/114)
- [#108, ì‹œì§€í”„](https://github.com/woowacourse/react-payments/pull/108)

## ì£¼ì•ˆì 

- custom hookì— ëŒ€í•œ ê²¬í•´

  - [ì•„ì‚¬]

  ìž¬ì‚¬ìš©ì— ëŒ€í•œ ë¶€ë¶„ì€ ì €ë„ ê³µì‹ë¬¸ì„œë‚˜ ì—¬íƒ€ ë¬¸ì„œë¥¼ ë´ë„ ìž¬ì‚¬ìš©ì„ ê°•ì¡°í•˜ëŠ”ê±¸ ì¸ì§€í•˜ê³  ìžˆê¸´í•´ìš”.
  í•˜ì§€ë§Œ ê¼­ ìž¬ì‚¬ìš©ì´ í•„ìš”í•´ì•¼í• ì§€ëŠ” ì €ë„ ì¡°ê¸ˆ ì˜ë¬¸ì´ ìžˆì–´ì„œ ì €ë„ ëª…ì¾Œí•œ ë‹µë³€ì„ ë“œë¦¬ê¸° ì–´ë µë„¤ìš” ðŸ’¦

  ì €ë„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UIë¥¼ ë¶„ë¦¬í•˜ëŠ”ê²ƒì— ì´ˆì ì„ ë§Žì´ ë§žì¶”ëŠ” íŽ¸ì´ì—ìš”.
  ìž¬ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ íŽ˜ì´ì§€ë³„ë¡œ hookì„ ìž‘ì„±í•˜ëŠ”ê±¸ ì¢‹ì•„í•´ìš”.

  'pageë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œì—ì„œ ì •ë§ í•„ìš”í•œ ì •ë³´ì¸ê°€?'ë¥¼ ìƒê°í•´ë³¸ ë’¤ì— ì„¸ë¶€ì ì¸ ìœ íš¨ì„± ê²€ì‚¬ë‚˜ í˜„ìž¬ì²˜ëŸ¼ ë°ì´í„°ë¥¼ stateì— ë„£ì–´ì£¼ëŠ” ë¡œì§ì´ ì½”ë“œíë¦„ì„ íŒŒì•…í•˜ëŠ”ë° ì–´ë µë‹¤ê³  ìƒê°ë˜ëŠ” ì½”ë“œì¡°ê°ì´ ìžˆë‹¤ë©´ hookìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ”ê²Œ ë§žë‹¤ê³  ìƒê°í•´ìš”.

- ìµœì í™”

- API í•¨ìˆ˜

- storybook

## ì½”ë“œ ë¶„ì„

- [#118] Header Title

  ```javascript
  function Header() {
    const { pathname } = useLocation();
    const navigate = useNavigate();

    const onClick = () => {
      navigate(ROUTE.home.route, { replace: true });
    };

    return (
      <h1 className="page-title" onClick={onClick}>
        {ROUTE.home.route !== pathname && "<"}
        &nbsp;
        {PAGE_TITLE[pathname] ?? "ì—†ëŠ” í™”ë©´"}
      </h1>
    );
  }
  ```

- [#118] useNavigate, Linkì˜ stateë¥¼ props ì²˜ëŸ¼ ë°›ê¸°

  ```javascript
  function withRouteState(Component) {
    const UseRouteStateComponent = (props) => {
      const { state } = useLocation();

      if (!state) {
        return <ErrorPage />;
      }

      return <Component routeState={state} {...props} />;
    };

    return UseRouteStateComponent;
  }

  export default withRouteState;

  function EditCard({ cardListDispatch, getCard, routeState: { cardId } }) {

  export default withRouteState(EditCard);
  ```

- [#131](https://lucent-griffin-a966fd.netlify.app/card-list) Drag & Drop

  ```javascript
  import { Droppable } from "react-beautiful-dnd";
  import { DragDropContext } from "react-beautiful-dnd";
  export default function DroppableArea({ children, cards, dispatch, type }) {
    const onDragEnd = ({ destination, source }) => {
      if (!destination) return;

      const cardListCopy = [...cards];
      cardListCopy.splice(source.index, 1);
      cardListCopy.splice(destination?.index, 0, cards[source.index]);

      dispatch({ type, cards: cardListCopy });
    };

    return (
      <DragDropContext onDragEnd={onDragEnd}>
        <Droppable droppableId="droppable">{children}</Droppable>
      </DragDropContext>
    );
  }
  ```

- [#131] Route index

  index propì€ ìƒìœ„ ë¼ìš°íŠ¸ì˜ ê²½ë¡œì™€ ì¼ì¹˜í•˜ì§€ë§Œ, ê·¸ ì´í›„ì— ê²½ë¡œê°€ ì£¼ì–´ì§€ì§€ ì•Šì•˜ì„ë•Œ ë³´ì—¬ì§€ëŠ” ë¼ìš°íŠ¸ë¥¼ ì„¤ì •í• ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

  ```javascript
  const App = () => {
    return (
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="/about" element={<About />} />
          <Route path="/profiles/:username" element={<Profile />} />
        </Route>
        <Route path="/articles" element={<Articles />}>
          <Route path=":id" element={<Article />} />
        </Route>
      </Routes>
    );
  };

  export default App;
  ```

## í”¼ë“œë°± ì •ë¦¬

- [#108]
  ì•„ëž˜ ì½”ë“œì˜ ë¬¸ì œì ì€?

  ```javascript
  useEffect(() => {
    (async function () {
      const data = await API.getCards();

      setCards(data);
    })();
  }, []);
  ```

  fetch ì„±ê³µ ì „ì—, unmount ëœë‹¤ë©´?
  unmount ì´í›„ì—ëŠ” setCardsë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤
  ë©”ëª¨ë¦¬ ë‚­ë¹„ì´ë‹¤.

  `Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application.`

  ```javascript
  useEffect(() => {
    setIsLoading(true);
    (async function () {
      try {
        const data = await API.getCards();

        if (!isLoading) {
          dispatch({ type: "GET_CARD", payload: data });
        }

        setIsLoading(false);
      } catch ({ message }) {
        throwError(new Error(message));
      }
    })();

    return () => {
      setIsLoading(false);
    };
  }, []);
  ```

### ì»¨ë²¤ì…˜

### í´ë¦°ì½”ë“œ

### ì„±ëŠ¥

### ì„¤ê³„

### JS

- Object.fromEntries

  ```javascript
  const entries = new Map([
    ["foo", "bar"],
    ["baz", 42],
  ]);

  const obj = Object.fromEntries(entries);

  console.log(obj);
  // expected output: Object { foo: "bar", baz: 42 }
  ```

### ë³€ìˆ˜ëª…

### ê°ì²´ì§€í–¥

### HTML ì›¹ í‘œì¤€

### CSS

### í…ŒìŠ¤íŠ¸ ì½”ë“œ

## ê¸°íƒ€ ë°°ìš¸ ì 

## ë°°ì¹­

- batchingì´ ë¬´ì—‡ì¸ê°€? batchingìœ¼ë¡œ ë Œë”ë§ì„ ì¤„ì—¬ë³´ìž.

- setStateë¥¼ ë¹„ë™ê¸°ë¡œ ì„¤ì •í•˜ì—¬, í•œë²ˆì— ëª¨ì•„ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒì„ ë°°ì¹­ì´ë¼ê³  í•œë‹¤.
- ë°°ì¹­ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‹¨ìœ„ë¡œ ì‹¤í–‰ëœë‹¤.

ì•„ëž˜ ì½”ë“œì—ì„œ consoleì´ ì–´ë–¤ ìˆœì„œë¡œ ì°íž ê²ƒì¸ê°€?

```javascript
const [isLoading, setIsLoading] = useState(false);

useEffect(() => {
  console.log("isLoading", isLoading);
}, [isLoading]);

const handleClick = () => {
  setIsLoading((prev) => !prev);
  console.log("something");

  setIsLoading((prev) => !prev);
};
```

ì´ë¥¼ í™œìš©í•˜ì—¬ ë Œë”ë§ì„ ìµœì í™”í•´ë³´ìž.

- ì´ì „ ì½”ë“œ

```typescript
// ì¹´ë“œ ì •ë³´ ì—…ë°ì´íŠ¸
const onChangeSecurityCode: InputChangeFunction = useCallback((e) => {
  const value = e.target.value;

  if (value === "" || REGEXP.NUMBER.test(value)) {
    const securityCode = value;

    cardInfoDispatch({
      type: "CHANGE_SECURITY_CODE",
      payload: { securityCode },
    });
  }
}, []);

// ì¹´ë“œ ì •ë³´ê°€ ì—…ë°ì´íŠ¸ ë˜ë©´, validation ì •ë³´ ì—…ë°ì´íŠ¸
useEffect(() => {
  handleChangeValidation(
    "securityCode",
    cardInfo.securityCode,
    cardInfoValidator["securityCode"]
  );
}, [cardInfo.securityCode]);
```

- ìµœì í™” ì½”ë“œ

```typescript
const onChangeSecurityCode: InputChangeFunction = useCallback((e) => {
  const value = e.target.value;

  if (value === "" || REGEXP.NUMBER.test(value)) {
    const securityCode = value;

    cardInfoDispatch({
      type: "CHANGE_SECURITY_CODE",
      payload: { securityCode },
    });
    handleChangeValidation(
      "securityCode",
      securityCode,
      cardInfoValidator["securityCode"]
    );
  }
}, []);
```
